/*! angular-soundmanager2 22-04-2015 */
!function(e,t){"use strict";function n(n,o){function i(e){return me.preferFlash&&le&&!me.ignoreFlash&&me.flash[e]!==t&&me.flash[e]}function a(e){return function(t){var n,o=this._s;return o&&o._a?n=e.call(this,t):(o&&o.id?me._wD(o.id+": Ignoring "+t.type):me._wD(be+"Ignoring "+t.type),n=null),n}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=o||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20140901",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var r,s,u,l,d,c,f,p,h,g,m,y,_,v,w,b,M,O,T,P,D,L,S,k,F,I,A,H,E,C,x,N,R,U,$,B,j,V,W,q,Q,K,X,J,z,G,Z,Y,ee,te,ne,oe,ie,ae,re,se,ue,le,de,ce,fe,pe,he,ge,me=this,ye=null,_e=null,ve="soundManager",we=ve+": ",be="HTML5::",Me=navigator.userAgent,Oe=e.location.href.toString(),Te=document,Pe=[],De=!0,Le=!1,Se=!1,ke=!1,Fe=!1,Ie=!1,Ae=0,He=["log","info","warn","error"],Ee=8,Ce=null,xe=null,Ne=!1,Re=!1,Ue=0,$e=null,Be=[],je=null,Ve=Array.prototype.slice,We=!1,qe=0,Qe=Me.match(/(ipad|iphone|ipod)/i),Ke=Me.match(/android/i),Xe=Me.match(/msie/i),Je=Me.match(/webkit/i),ze=Me.match(/safari/i)&&!Me.match(/chrome/i),Ge=Me.match(/opera/i),Ze=Me.match(/(mobile|pre\/|xoom)/i)||Qe||Ke,Ye=!Oe.match(/usehtml5audio/i)&&!Oe.match(/sm2\-ignorebadua/i)&&ze&&!Me.match(/silk/i)&&Me.match(/OS X 10_6_([3-7])/i),et=e.console!==t&&console.log!==t,tt=Te.hasFocus!==t?Te.hasFocus():null,nt=ze&&(Te.hasFocus===t||!Te.hasFocus()),ot=!nt,it=/(mp3|mp4|mpa|m4a|m4b)/i,at=1e3,rt="about:blank",st="data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==",ut=Te.location?Te.location.protocol.match(/http/i):null,lt=ut?"":"http://",dt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,ct=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ft=new RegExp("\\.("+ct.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!ut,V={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==t&&(Ge&&opera!==t&&opera.version()<10?new Audio(null):new Audio).canPlayType!==t}catch(e){return!1}}(),this.setup=function(e){var n=!me.url;return e!==t&&ke&&je&&me.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t)&&K($("setupLate")),m(e),e&&(n&&I&&e.url!==t&&me.beginDelayedInit(),I||e.url===t||"complete"!==Te.readyState||setTimeout(k,1)),me},this.ok=function(){return je?ke&&!Fe:me.useHTML5Audio&&me.hasHTML5},this.supported=this.ok,this.getMovie=function(t){return s(t)||Te[t]||e[t]},this.createSound=function(e,n){function o(){return s=q(s),me.sounds[s.id]=new r(s),me.soundIDs.push(s.id),me.sounds[s.id]}var i,a,s,u=null;if(i=ve+".createSound(): ",a=i+$(ke?"notOK":"notReady"),!ke||!me.ok())return K(a),!1;if(n!==t&&(e={id:e,url:n}),s=g(e),s.url=Z(s.url),void 0===s.id&&(s.id=me.setupOptions.idPrefix+qe++),s.id.toString().charAt(0).match(/^[0-9]$/)&&me._wD(i+$("badID",s.id),2),me._wD(i+s.id+(s.url?" ("+s.url+")":""),1),X(s.id,!0))return me._wD(i+s.id+" exists",1),me.sounds[s.id];if(te(s))u=o(),me._wD(s.id+": Using HTML5"),u._setup_html5(s);else{if(me.html5Only)return me._wD(s.id+": No HTML5 support for this sound, and no Flash. Exiting."),o();if(me.html5.usingFlash&&s.url&&s.url.match(/data\:/i))return me._wD(s.id+": data: URIs not supported via Flash. Exiting."),o();c>8&&(null===s.isMovieStar&&(s.isMovieStar=!!(s.serverURL||(s.type?s.type.match(dt):!1)||s.url&&s.url.match(ft))),s.isMovieStar&&(me._wD(i+"using MovieStar handling"),s.loops>1&&p("noNSLoop"))),s=Q(s,i),u=o(),8===c?_e._createSound(s.id,s.loops||1,s.usePolicyFile):(_e._createSound(s.id,s.url,s.usePeakData,s.useWaveformData,s.useEQData,s.isMovieStar,s.isMovieStar?s.bufferTime:!1,s.loops||1,s.serverURL,s.duration||null,s.autoPlay,!0,s.autoLoad,s.usePolicyFile),s.serverURL||(u.connected=!0,s.onconnect&&s.onconnect.apply(u))),s.serverURL||!s.autoLoad&&!s.autoPlay||u.load(s)}return!s.serverURL&&s.autoPlay&&u.play(),u},this.destroySound=function(e,t){if(!X(e))return!1;var n,o=me.sounds[e];for(o._iO={},o.stop(),o.unload(),n=0;n<me.soundIDs.length;n++)if(me.soundIDs[n]===e){me.soundIDs.splice(n,1);break}return t||o.destruct(!0),o=null,delete me.sounds[e],!0},this.load=function(e,t){return X(e)?me.sounds[e].load(t):!1},this.unload=function(e){return X(e)?me.sounds[e].unload():!1},this.onPosition=function(e,t,n,o){return X(e)?me.sounds[e].onposition(t,n,o):!1},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,n){return X(e)?me.sounds[e].clearOnPosition(t,n):!1},this.play=function(e,t){var n=null,o=t&&!(t instanceof Object);if(!ke||!me.ok())return K(ve+".play(): "+$(ke?"notOK":"notReady")),!1;if(X(e,o))o&&(t={url:t});else{if(!o)return!1;o&&(t={url:t}),t&&t.url&&(me._wD(ve+'.play(): Attempting to create "'+e+'"',1),t.id=e,n=me.createSound(t).play())}return null===n&&(n=me.sounds[e].play(t)),n},this.start=this.play,this.setPosition=function(e,t){return X(e)?me.sounds[e].setPosition(t):!1},this.stop=function(e){return X(e)?(me._wD(ve+".stop("+e+")",1),me.sounds[e].stop()):!1},this.stopAll=function(){var e;me._wD(ve+".stopAll()",1);for(e in me.sounds)me.sounds.hasOwnProperty(e)&&me.sounds[e].stop()},this.pause=function(e){return X(e)?me.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=me.soundIDs.length-1;e>=0;e--)me.sounds[me.soundIDs[e]].pause()},this.resume=function(e){return X(e)?me.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=me.soundIDs.length-1;e>=0;e--)me.sounds[me.soundIDs[e]].resume()},this.togglePause=function(e){return X(e)?me.sounds[e].togglePause():!1},this.setPan=function(e,t){return X(e)?me.sounds[e].setPan(t):!1},this.setVolume=function(e,t){return X(e)?me.sounds[e].setVolume(t):!1},this.mute=function(e){var t=0;if(e instanceof String&&(e=null),e)return X(e)?(me._wD(ve+'.mute(): Muting "'+e+'"'),me.sounds[e].mute()):!1;for(me._wD(ve+".mute(): Muting all sounds"),t=me.soundIDs.length-1;t>=0;t--)me.sounds[me.soundIDs[t]].mute();return me.muted=!0,!0},this.muteAll=function(){me.mute()},this.unmute=function(e){var t;if(e instanceof String&&(e=null),e)return X(e)?(me._wD(ve+'.unmute(): Unmuting "'+e+'"'),me.sounds[e].unmute()):!1;for(me._wD(ve+".unmute(): Unmuting all sounds"),t=me.soundIDs.length-1;t>=0;t--)me.sounds[me.soundIDs[t]].unmute();return me.muted=!1,!0},this.unmuteAll=function(){me.unmute()},this.toggleMute=function(e){return X(e)?me.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return _e&&8!==c&&(e=parseInt(_e._getMemoryUse(),10)),e},this.disable=function(n){var o;if(n===t&&(n=!1),Fe)return!1;for(Fe=!0,p("shutdown",1),o=me.soundIDs.length-1;o>=0;o--)N(me.sounds[me.soundIDs[o]]);return h(n),se.remove(e,"load",w),!0},this.canPlayMIME=function(e){var t;return me.hasHTML5&&(t=ne({type:e})),!t&&je&&(t=e&&me.ok()?!!((c>8?e.match(dt):null)||e.match(me.mimePattern)):null),t},this.canPlayURL=function(e){var t;return me.hasHTML5&&(t=ne({url:e})),!t&&je&&(t=e&&me.ok()?!!e.match(me.filePattern):null),t},this.canPlayLink=function(e){return e.type!==t&&e.type&&me.canPlayMIME(e.type)?!0:me.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)return null;var n=me.sounds[e];return n||t||me._wD(ve+'.getSoundById(): Sound "'+e+'" not found.',2),n},this.onready=function(t,n){var o="onready",i=!1;if("function"!=typeof t)throw $("needFunction",o);return ke&&me._wD($("queue",o)),n||(n=e),_(o,t,n),v(),i=!0,i},this.ontimeout=function(t,n){var o="ontimeout",i=!1;if("function"!=typeof t)throw $("needFunction",o);return ke&&me._wD($("queue",o)),n||(n=e),_(o,t,n),v({type:o}),i=!0,i},this._writeDebug=function(e,n){var o,i,a="soundmanager-debug";return me.debugMode?et&&me.useConsole&&(n&&"object"==typeof n?console.log(e,n):He[n]!==t?console[He[n]](e):console.log(e),me.consoleOnly)?!0:(o=s(a))?(i=Te.createElement("div"),++Ae%2===0&&(i.className="sm2-alt"),n=n===t?0:parseInt(n,10),i.appendChild(Te.createTextNode(e)),n&&(n>=2&&(i.style.fontWeight="bold"),3===n&&(i.style.color="#ff3333")),o.insertBefore(i,o.firstChild),o=null,!0):!1:!1},-1!==Oe.indexOf("sm2-debug=alert")&&(this._writeDebug=function(t){e.alert(t)}),this._wD=this._writeDebug,this._debug=function(){var e,t;for(p("currentObj",1),e=0,t=me.soundIDs.length;t>e;e++)me.sounds[me.soundIDs[e]]._debug()},this.reboot=function(t,n){me.soundIDs.length&&me._wD("Destroying "+me.soundIDs.length+" SMSound object"+(1!==me.soundIDs.length?"s":"")+"...");var o,i,a;for(o=me.soundIDs.length-1;o>=0;o--)me.sounds[me.soundIDs[o]].destruct();if(_e)try{Xe&&(xe=_e.innerHTML),Ce=_e.parentNode.removeChild(_e)}catch(r){p("badRemove",2)}if(xe=Ce=je=_e=null,me.enabled=I=ke=Ne=Re=Le=Se=Fe=We=me.swfLoaded=!1,me.soundIDs=[],me.sounds={},qe=0,t)Pe=[];else for(o in Pe)if(Pe.hasOwnProperty(o))for(i=0,a=Pe[o].length;a>i;i++)Pe[o][i].fired=!1;return n||me._wD(ve+": Rebooting..."),me.html5={usingFlash:null},me.flash={},me.html5Only=!1,me.ignoreFlash=!1,e.setTimeout(function(){S(),n||me.beginDelayedInit()},20),me},this.reset=function(){return p("reset"),me.reboot(!0,!0)},this.getMoviePercent=function(){return _e&&"PercentLoaded"in _e?_e.PercentLoaded():null},this.beginDelayedInit=function(){Ie=!0,k(),setTimeout(function(){return Re?!1:(H(),L(),Re=!0,!0)},20),b()},this.destruct=function(){me._wD(ve+".destruct()"),me.disable(!0)},r=function(e){var n,o,i,a,r,s,u,l,d,h,m=this,y=!1,_=[],v=0,w=null;d={duration:null,time:null},this.id=e.id,this.sID=this.id,this.url=e.url,this.options=g(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,h=this.url?!1:!0,this.id3={},this._debug=function(){me._wD(m.id+": Merged options:",m.options)},this.load=function(e){var n,o=null;if(e!==t?m._iO=g(e,m.options):(e=m.options,m._iO=e,w&&w!==m.url&&(p("manURL"),m._iO.url=m.url,m.url=null)),m._iO.url||(m._iO.url=m.url),m._iO.url=Z(m._iO.url),m.instanceOptions=m._iO,n=m._iO,me._wD(m.id+": load ("+n.url+")"),!n.url&&!m.url)return me._wD(m.id+": load(): url is unassigned. Exiting.",2),m;if(m.isHTML5||8!==c||m.url||n.autoPlay||me._wD(m.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),n.url===m.url&&0!==m.readyState&&2!==m.readyState)return p("onURL",1),3===m.readyState&&n.onload&&ge(m,function(){n.onload.apply(m,[!!m.duration])}),m;if(m.loaded=!1,m.readyState=1,m.playState=0,m.id3={},te(n))o=m._setup_html5(n),o._called_load?me._wD(m.id+": Ignoring request to load again"):(m._html5_canplay=!1,m.url!==n.url&&(me._wD(p("manURL")+": "+n.url),m._a.src=n.url,m.setPosition(0)),m._a.autobuffer="auto",m._a.preload="auto",m._a._called_load=!0);else{if(me.html5Only)return me._wD(m.id+": No flash support. Exiting."),m;if(m._iO.url&&m._iO.url.match(/data\:/i))return me._wD(m.id+": data: URIs not supported via Flash. Exiting."),m;try{m.isHTML5=!1,m._iO=Q(q(n)),m._iO.autoPlay&&(m._iO.position||m._iO.from)&&(me._wD(m.id+": Disabling autoPlay because of non-zero offset case"),m._iO.autoPlay=!1),n=m._iO,8===c?_e._load(m.id,n.url,n.stream,n.autoPlay,n.usePolicyFile):_e._load(m.id,n.url,!!n.stream,!!n.autoPlay,n.loops||1,!!n.autoLoad,n.usePolicyFile)}catch(i){p("smError",2),f("onload",!1),E({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return m.url=n.url,m},this.unload=function(){return 0!==m.readyState&&(me._wD(m.id+": unload()"),m.isHTML5?(a(),m._a&&(m._a.pause(),w=ie(m._a))):8===c?_e._unload(m.id,rt):_e._unload(m.id),n()),m},this.destruct=function(e){me._wD(m.id+": Destruct"),m.isHTML5?(a(),m._a&&(m._a.pause(),ie(m._a),We||i(),m._a._s=null,m._a=null)):(m._iO.onfailure=null,_e._destroySound(m.id)),e||me.destroySound(m.id,!0)},this.play=function(e,n){var o,i,a,u,d,f,p,_=!0,v=null;if(o=m.id+": play(): ",n=n===t?!0:n,e||(e={}),m.url&&(m._iO.url=m.url),m._iO=g(m._iO,m.options),m._iO=g(e,m._iO),m._iO.url=Z(m._iO.url),m.instanceOptions=m._iO,!m.isHTML5&&m._iO.serverURL&&!m.connected)return m.getAutoPlay()||(me._wD(o+" Netstream not connected yet - setting autoPlay"),m.setAutoPlay(!0)),m;if(te(m._iO)&&(m._setup_html5(m._iO),r()),1!==m.playState||m.paused||(i=m._iO.multiShot,i?me._wD(o+"Already playing (multi-shot)",1):(me._wD(o+"Already playing (one-shot)",1),m.isHTML5&&m.setPosition(m._iO.position),v=m)),null!==v)return v;if(e.url&&e.url!==m.url&&(m.readyState||m.isHTML5||8!==c||!h?m.load(m._iO):h=!1),m.loaded?me._wD(o.substr(0,o.lastIndexOf(":"))):0===m.readyState?(me._wD(o+"Attempting to load"),m.isHTML5||me.html5Only?m.isHTML5?m.load(m._iO):(me._wD(o+"Unsupported type. Exiting."),v=m):(m._iO.autoPlay=!0,m.load(m._iO)),m.instanceOptions=m._iO):2===m.readyState?(me._wD(o+"Could not load - exiting",2),v=m):me._wD(o+"Loading - attempting to play..."),null!==v)return v;if(!m.isHTML5&&9===c&&m.position>0&&m.position===m.duration&&(me._wD(o+"Sound at end, resetting to position:0"),e.position=0),m.paused&&m.position>=0&&(!m._iO.serverURL||m.position>0))me._wD(o+"Resuming from paused state",1),m.resume();else{if(m._iO=g(e,m._iO),(!m.isHTML5&&null!==m._iO.position&&m._iO.position>0||null!==m._iO.from&&m._iO.from>0||null!==m._iO.to)&&0===m.instanceCount&&0===m.playState&&!m._iO.serverURL){if(u=function(){m._iO=g(e,m._iO),m.play(m._iO)},m.isHTML5&&!m._html5_canplay?(me._wD(o+"Beginning load for non-zero offset case"),m.load({_oncanplay:u}),v=!1):m.isHTML5||m.loaded||m.readyState&&2===m.readyState||(me._wD(o+"Preloading for non-zero offset case"),m.load({onload:u}),v=!1),null!==v)return v;m._iO=l()}(!m.instanceCount||m._iO.multiShotEvents||m.isHTML5&&m._iO.multiShot&&!We||!m.isHTML5&&c>8&&!m.getAutoPlay())&&m.instanceCount++,m._iO.onposition&&0===m.playState&&s(m),m.playState=1,m.paused=!1,m.position=m._iO.position===t||isNaN(m._iO.position)?0:m._iO.position,m.isHTML5||(m._iO=Q(q(m._iO))),m._iO.onplay&&n&&(m._iO.onplay.apply(m),y=!0),m.setVolume(m._iO.volume,!0),m.setPan(m._iO.pan,!0),m.isHTML5?m.instanceCount<2?(r(),a=m._setup_html5(),m.setPosition(m._iO.position),a.play()):(me._wD(m.id+": Cloning Audio() for instance #"+m.instanceCount+"..."),d=new Audio(m._iO.url),f=function(){se.remove(d,"ended",f),m._onfinish(m),ie(d),d=null},p=function(){se.remove(d,"canplay",p);try{d.currentTime=m._iO.position/at}catch(e){K(m.id+": multiShot play() failed to apply position of "+m._iO.position/at)}d.play()},se.add(d,"ended",f),void 0!==m._iO.volume&&(d.volume=Math.max(0,Math.min(1,m._iO.volume/100))),m.muted&&(d.muted=!0),m._iO.position?se.add(d,"canplay",p):d.play()):(_=_e._start(m.id,m._iO.loops||1,9===c?m.position:m.position/at,m._iO.multiShot||!1),9!==c||_||(me._wD(o+"No sound hardware, or 32-sound ceiling hit",2),m._iO.onplayerror&&m._iO.onplayerror.apply(m)))}return m},this.start=this.play,this.stop=function(e){var t,n=m._iO;return 1===m.playState&&(me._wD(m.id+": stop()"),m._onbufferchange(0),m._resetOnPosition(0),m.paused=!1,m.isHTML5||(m.playState=0),u(),n.to&&m.clearOnPosition(n.to),m.isHTML5?m._a&&(t=m.position,m.setPosition(0),m.position=t,m._a.pause(),m.playState=0,m._onTimer(),a()):(_e._stop(m.id,e),n.serverURL&&m.unload()),m.instanceCount=0,m._iO={},n.onstop&&n.onstop.apply(m)),m},this.setAutoPlay=function(e){me._wD(m.id+": Autoplay turned "+(e?"on":"off")),m._iO.autoPlay=e,m.isHTML5||(_e._setAutoPlay(m.id,e),e&&(m.instanceCount||1!==m.readyState||(m.instanceCount++,me._wD(m.id+": Incremented instance count to "+m.instanceCount))))},this.getAutoPlay=function(){return m._iO.autoPlay},this.setPosition=function(e){e===t&&(e=0);var n,o,i=m.isHTML5?Math.max(e,0):Math.min(m.duration||m._iO.duration,Math.max(e,0));if(m.position=i,o=m.position/at,m._resetOnPosition(m.position),m._iO.position=i,m.isHTML5){if(m._a){if(m._html5_canplay){if(m._a.currentTime!==o){me._wD(m.id+": setPosition("+o+")");try{m._a.currentTime=o,(0===m.playState||m.paused)&&m._a.pause()}catch(a){me._wD(m.id+": setPosition("+o+") failed: "+a.message,2)}}}else if(o)return me._wD(m.id+": setPosition("+o+"): Cannot seek yet, sound not ready",2),m;m.paused&&m._onTimer(!0)}}else n=9===c?m.position:o,m.readyState&&2!==m.readyState&&_e._setPosition(m.id,n,m.paused||!m.playState,m._iO.multiShot);return m},this.pause=function(e){return m.paused||0===m.playState&&1!==m.readyState?m:(me._wD(m.id+": pause()"),m.paused=!0,m.isHTML5?(m._setup_html5().pause(),a()):(e||e===t)&&_e._pause(m.id,m._iO.multiShot),m._iO.onpause&&m._iO.onpause.apply(m),m)},this.resume=function(){var e=m._iO;return m.paused?(me._wD(m.id+": resume()"),m.paused=!1,m.playState=1,m.isHTML5?(m._setup_html5().play(),r()):(e.isMovieStar&&!e.serverURL&&m.setPosition(m.position),_e._pause(m.id,e.multiShot)),!y&&e.onplay?(e.onplay.apply(m),y=!0):e.onresume&&e.onresume.apply(m),m):m},this.togglePause=function(){return me._wD(m.id+": togglePause()"),0===m.playState?(m.play({position:9!==c||m.isHTML5?m.position/at:m.position}),m):(m.paused?m.resume():m.pause(),m)},this.setPan=function(e,n){return e===t&&(e=0),n===t&&(n=!1),m.isHTML5||_e._setPan(m.id,e),m._iO.pan=e,n||(m.pan=e,m.options.pan=e),m},this.setVolume=function(e,n){return e===t&&(e=100),n===t&&(n=!1),m.isHTML5?m._a&&(me.muted&&!m.muted&&(m.muted=!0,m._a.muted=!0),m._a.volume=Math.max(0,Math.min(1,e/100))):_e._setVolume(m.id,me.muted&&!m.muted||m.muted?0:e),m._iO.volume=e,n||(m.volume=e,m.options.volume=e),m},this.mute=function(){return m.muted=!0,m.isHTML5?m._a&&(m._a.muted=!0):_e._setVolume(m.id,0),m},this.unmute=function(){m.muted=!1;var e=m._iO.volume!==t;return m.isHTML5?m._a&&(m._a.muted=!1):_e._setVolume(m.id,e?m._iO.volume:m.options.volume),m},this.toggleMute=function(){return m.muted?m.unmute():m.mute()},this.onPosition=function(e,n,o){return _.push({position:parseInt(e,10),method:n,scope:o!==t?o:m,fired:!1}),m},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var n;if(e=parseInt(e,10),isNaN(e))return!1;for(n=0;n<_.length;n++)e===_[n].position&&(t&&t!==_[n].method||(_[n].fired&&v--,_.splice(n,1)))},this._processOnPosition=function(){var e,t,n=_.length;if(!n||!m.playState||v>=n)return!1;for(e=n-1;e>=0;e--)t=_[e],!t.fired&&m.position>=t.position&&(t.fired=!0,v++,t.method.apply(t.scope,[t.position]),n=_.length);return!0},this._resetOnPosition=function(e){var t,n,o=_.length;if(!o)return!1;for(t=o-1;t>=0;t--)n=_[t],n.fired&&e<=n.position&&(n.fired=!1,v--);return!0},l=function(){var e,t,n=m._iO,o=n.from,i=n.to;return t=function(){me._wD(m.id+': "To" time of '+i+" reached."),m.clearOnPosition(i,t),m.stop()},e=function(){me._wD(m.id+': Playing "from" '+o),null===i||isNaN(i)||m.onPosition(i,t)},null===o||isNaN(o)||(n.position=o,n.multiShot=!1,e()),n},s=function(){var e,t=m._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&m.onPosition(parseInt(e,10),t[e])},u=function(){var e,t=m._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&m.clearOnPosition(parseInt(e,10))},r=function(){m.isHTML5&&J(m)},a=function(){m.isHTML5&&z(m)},n=function(e){e||(_=[],v=0),y=!1,m._hasTimer=null,m._a=null,m._html5_canplay=!1,m.bytesLoaded=null,m.bytesTotal=null,m.duration=m._iO&&m._iO.duration?m._iO.duration:null,m.durationEstimate=null,m.buffered=[],m.eqData=[],m.eqData.left=[],m.eqData.right=[],m.failures=0,m.isBuffering=!1,m.instanceOptions={},m.instanceCount=0,m.loaded=!1,m.metadata={},m.readyState=0,m.muted=!1,m.paused=!1,m.peakData={left:0,right:0},m.waveformData={left:[],right:[]},m.playState=0,m.position=null,m.id3={}},n(),this._onTimer=function(e){var t,n,o=!1,i={};return m._hasTimer||e?(m._a&&(e||(m.playState>0||1===m.readyState)&&!m.paused)&&(t=m._get_html5_duration(),t!==d.duration&&(d.duration=t,m.duration=t,o=!0),m.durationEstimate=m.duration,n=m._a.currentTime*at||0,n!==d.time&&(d.time=n,o=!0),(o||e)&&m._whileplaying(n,i,i,i,i)),o):void 0},this._get_html5_duration=function(){var e=m._iO,t=m._a&&m._a.duration?m._a.duration*at:e&&e.duration?e.duration:null,n=t&&!isNaN(t)&&t!==1/0?t:null;return n},this._apply_loop=function(e,t){!e.loop&&t>1&&me._wD("Note: Native HTML5 looping is infinite.",1),e.loop=t>1?"loop":""},this._setup_html5=function(e){var t,i=g(m._iO,e),a=We?ye:m._a,r=decodeURI(i.url);if(We?r===decodeURI(ue)&&(t=!0):r===decodeURI(w)&&(t=!0),a){if(a._s)if(We)a._s&&a._s.playState&&!t&&a._s.stop();else if(!We&&r===decodeURI(w))return m._apply_loop(a,i.loops),a;t||(w&&n(!1),a.src=i.url,m.url=i.url,w=i.url,ue=i.url,a._called_load=!1)}else i.autoLoad||i.autoPlay?(m._a=new Audio(i.url),m._a.load()):m._a=Ge&&opera.version()<10?new Audio(null):new Audio,a=m._a,a._called_load=!1,We&&(ye=a);return m.isHTML5=!0,m._a=a,a._s=m,o(),m._apply_loop(a,i.loops),i.autoLoad||i.autoPlay?m.load():(a.autobuffer=!1,a.preload="auto"),a},o=function(){function e(e,t,n){return m._a?m._a.addEventListener(e,t,n||!1):null}if(m._a._added_events)return!1;var t;m._a._added_events=!0;for(t in fe)fe.hasOwnProperty(t)&&e(t,fe[t]);return!0},i=function(){function e(e,t,n){return m._a?m._a.removeEventListener(e,t,n||!1):null}var t;me._wD(m.id+": Removing event listeners"),m._a._added_events=!1;for(t in fe)fe.hasOwnProperty(t)&&e(t,fe[t])},this._onload=function(e){var t,n=!!e||!m.isHTML5&&8===c&&m.duration;return t=m.id+": ",me._wD(t+(n?"onload()":"Failed to load / invalid sound?"+(m.duration?" -":" Zero-length duration reported.")+" ("+m.url+")"),n?1:2),n||m.isHTML5||(me.sandbox.noRemote===!0&&me._wD(t+$("noNet"),1),me.sandbox.noLocal===!0&&me._wD(t+$("noLocal"),1)),m.loaded=n,m.readyState=n?3:2,m._onbufferchange(0),m._iO.onload&&ge(m,function(){m._iO.onload.apply(m,[n])}),!0},this._onbufferchange=function(e){return 0===m.playState?!1:e&&m.isBuffering||!e&&!m.isBuffering?!1:(m.isBuffering=1===e,m._iO.onbufferchange&&(me._wD(m.id+": Buffer state change: "+e),m._iO.onbufferchange.apply(m,[e])),!0)},this._onsuspend=function(){return m._iO.onsuspend&&(me._wD(m.id+": Playback suspended"),m._iO.onsuspend.apply(m)),!0},this._onfailure=function(e,t,n){m.failures++,me._wD(m.id+": Failure ("+m.failures+"): "+e),m._iO.onfailure&&1===m.failures?m._iO.onfailure(e,t,n):me._wD(m.id+": Ignoring failure")},this._onwarning=function(e,t,n){m._iO.onwarning&&m._iO.onwarning(e,t,n)},this._onfinish=function(){var e=m._iO.onfinish;m._onbufferchange(0),m._resetOnPosition(0),m.instanceCount&&(m.instanceCount--,m.instanceCount||(u(),m.playState=0,m.paused=!1,m.instanceCount=0,m.instanceOptions={},m._iO={},a(),m.isHTML5&&(m.position=0)),(!m.instanceCount||m._iO.multiShotEvents)&&e&&(me._wD(m.id+": onfinish()"),ge(m,function(){e.apply(m)})))},this._whileloading=function(e,t,n,o){var i=m._iO;m.bytesLoaded=e,m.bytesTotal=t,m.duration=Math.floor(n),m.bufferLength=o,m.isHTML5||i.isMovieStar?m.durationEstimate=m.duration:i.duration?m.durationEstimate=m.duration>i.duration?m.duration:i.duration:m.durationEstimate=parseInt(m.bytesTotal/m.bytesLoaded*m.duration,10),m.isHTML5||(m.buffered=[{start:0,end:m.duration}]),(3!==m.readyState||m.isHTML5)&&i.whileloading&&i.whileloading.apply(m)},this._whileplaying=function(e,n,o,i,a){var r,s=m._iO;return isNaN(e)||null===e?!1:(m.position=Math.max(0,e),m._processOnPosition(),!m.isHTML5&&c>8&&(s.usePeakData&&n!==t&&n&&(m.peakData={left:n.leftPeak,right:n.rightPeak}),s.useWaveformData&&o!==t&&o&&(m.waveformData={left:o.split(","),right:i.split(",")}),s.useEQData&&a!==t&&a&&a.leftEQ&&(r=a.leftEQ.split(","),m.eqData=r,m.eqData.left=r,a.rightEQ!==t&&a.rightEQ&&(m.eqData.right=a.rightEQ.split(",")))),1===m.playState&&(m.isHTML5||8!==c||m.position||!m.isBuffering||m._onbufferchange(0),s.whileplaying&&s.whileplaying.apply(m)),!0)},this._oncaptiondata=function(e){me._wD(m.id+": Caption data received."),m.captiondata=e,m._iO.oncaptiondata&&m._iO.oncaptiondata.apply(m,[e])},this._onmetadata=function(e,t){me._wD(m.id+": Metadata received.");var n,o,i={};for(n=0,o=e.length;o>n;n++)i[e[n]]=t[n];m.metadata=i,console.log("updated metadata",m.metadata),m._iO.onmetadata&&m._iO.onmetadata.call(m,m.metadata)},this._onid3=function(e,t){me._wD(m.id+": ID3 data received.");var n,o,i=[];for(n=0,o=e.length;o>n;n++)i[e[n]]=t[n];m.id3=g(m.id3,i),m._iO.onid3&&m._iO.onid3.apply(m)},this._onconnect=function(e){e=1===e,me._wD(m.id+": "+(e?"Connected.":"Failed to connect? - "+m.url),e?1:2),m.connected=e,e&&(m.failures=0,X(m.id)&&(m.getAutoPlay()?m.play(t,m.getAutoPlay()):m._iO.autoLoad&&m.load()),m._iO.onconnect&&m._iO.onconnect.apply(m,[e]))},this._ondataerror=function(e){m.playState>0&&(me._wD(m.id+": Data error: "+e),m._iO.ondataerror&&m._iO.ondataerror.apply(m))},this._debug()},A=function(){return Te.body||Te.getElementsByTagName("div")[0]},s=function(e){return Te.getElementById(e)},g=function(e,n){var o,i,a=e||{};o=n===t?me.defaultOptions:n;for(i in o)o.hasOwnProperty(i)&&a[i]===t&&("object"!=typeof o[i]||null===o[i]?a[i]=o[i]:a[i]=g(a[i],o[i]));return a},ge=function(t,n){t.isHTML5||8!==c?n():e.setTimeout(n,0)},y={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},m=function(e,n){var o,i=!0,a=n!==t,r=me.setupOptions,s=y;if(e===t){i=[];for(o in r)r.hasOwnProperty(o)&&i.push(o);for(o in s)s.hasOwnProperty(o)&&("object"==typeof me[o]?i.push(o+": {...}"):me[o]instanceof Function?i.push(o+": function() {...}"):i.push(o));return me._wD($("setup",i.join(", "))),!1}for(o in e)if(e.hasOwnProperty(o))if("object"!=typeof e[o]||null===e[o]||e[o]instanceof Array||e[o]instanceof RegExp)a&&s[n]!==t?me[n][o]=e[o]:r[o]!==t?(me.setupOptions[o]=e[o],me[o]=e[o]):s[o]===t?(K($(me[o]===t?"setupUndef":"setupError",o),2),i=!1):me[o]instanceof Function?me[o].apply(me,e[o]instanceof Array?e[o]:[e[o]]):me[o]=e[o];else{if(s[o]!==t)return m(e[o],o);K($(me[o]===t?"setupUndef":"setupError",o),2),i=!1}return i},se=function(){function t(e){var t=Ve.call(e),n=t.length;return a?(t[1]="on"+t[1],n>3&&t.pop()):3===n&&t.push(!1),t}function n(e,t){var n=e.shift(),o=[r[t]];a?n[o](e[0],e[1]):n[o].apply(n,e)}function o(){n(t(arguments),"add")}function i(){n(t(arguments),"remove")}var a=e.attachEvent,r={add:a?"attachEvent":"addEventListener",remove:a?"detachEvent":"removeEventListener"};return{add:o,remove:i}}(),fe={abort:a(function(){me._wD(this._s.id+": abort")}),canplay:a(function(){var e,n=this._s;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,me._wD(n.id+": canplay"),n._onbufferchange(0),e=n._iO.position===t||isNaN(n._iO.position)?null:n._iO.position/at,this.currentTime!==e){me._wD(n.id+": canplay: Setting position to "+e);try{this.currentTime=e}catch(o){me._wD(n.id+": canplay: Setting position of "+e+" failed: "+o.message,2)}}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:a(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),durationchange:a(function(){var e,t=this._s;e=t._get_html5_duration(),isNaN(e)||e===t.duration||(me._wD(this._s.id+": durationchange ("+e+")"+(t.duration?", previously "+t.duration:"")),t.durationEstimate=t.duration=e)}),ended:a(function(){var e=this._s;me._wD(e.id+": ended"),e._onfinish()}),error:a(function(){me._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:a(function(){var e=this._s;me._wD(e.id+": loadeddata"),e._loaded||ze||(e.duration=e._get_html5_duration())}),loadedmetadata:a(function(){me._wD(this._s.id+": loadedmetadata")}),loadstart:a(function(){me._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:a(function(){this._s._onbufferchange(0)}),playing:a(function(){me._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:a(function(e){var t,n,o,i=this._s,a=0,r="progress"===e.type,s=e.target.buffered,u=e.loaded||0,l=e.total||1;if(i.buffered=[],s&&s.length){for(t=0,n=s.length;n>t;t++)i.buffered.push({start:s.start(t)*at,end:s.end(t)*at});if(a=(s.end(0)-s.start(0))*at,u=Math.min(1,a/(e.target.duration*at)),r&&s.length>1){for(o=[],n=s.length,t=0;n>t;t++)o.push(e.target.buffered.start(t)*at+"-"+e.target.buffered.end(t)*at);me._wD(this._s.id+": progress, timeRanges: "+o.join(", "))}r&&!isNaN(u)&&me._wD(this._s.id+": progress, "+Math.floor(100*u)+"% loaded")}isNaN(u)||(i._whileloading(u,l,i._get_html5_duration()),u&&l&&u===l&&fe.canplaythrough.call(this,e))}),ratechange:a(function(){me._wD(this._s.id+": ratechange")}),suspend:a(function(e){var t=this._s;me._wD(this._s.id+": suspend"),fe.progress.call(this,e),t._onsuspend()}),stalled:a(function(){me._wD(this._s.id+": stalled")}),timeupdate:a(function(){this._s._onTimer()}),waiting:a(function(){var e=this._s;me._wD(this._s.id+": waiting"),e._onbufferchange(1)})},te=function(e){var t;return t=e&&(e.type||e.url||e.serverURL)?e.serverURL||e.type&&i(e.type)?!1:e.type?ne({type:e.type}):ne({url:e.url})||me.html5Only||e.url.match(/data\:/i):!1},ie=function(e){var t;return e&&(t=ze?rt:me.html5.canPlayType("audio/wav")?st:rt,e.src=t,void 0!==e._called_unload&&(e._called_load=!1)),We&&(ue=null),t},ne=function(e){if(!me.useHTML5Audio||!me.hasHTML5)return!1;var n,o,a,r,s=e.url||null,u=e.type||null,l=me.audioFormats;if(u&&me.html5[u]!==t)return me.html5[u]&&!i(u);if(!oe){oe=[];for(r in l)l.hasOwnProperty(r)&&(oe.push(r),l[r].related&&(oe=oe.concat(l[r].related)));oe=new RegExp("\\.("+oe.join("|")+")(\\?.*)?$","i")}return a=s?s.toLowerCase().match(oe):null,a&&a.length?a=a[1]:u?(o=u.indexOf(";"),a=(-1!==o?u.substr(0,o):u).substr(6)):n=!1,a&&me.html5[a]!==t?n=me.html5[a]&&!i(a):(u="audio/"+a,n=me.html5.canPlayType({type:u}),me.html5[a]=n,n=n&&me.html5[u]&&!i(u)),n},re=function(){function e(e){var t,n,o=!1,i=!1;if(!r||"function"!=typeof r.canPlayType)return o;if(e instanceof Array){for(a=0,n=e.length;n>a;a++)(me.html5[e[a]]||r.canPlayType(e[a]).match(me.html5Test))&&(i=!0,me.html5[e[a]]=!0,me.flash[e[a]]=!!e[a].match(it));o=i}else t=r&&"function"==typeof r.canPlayType?r.canPlayType(e):!1,o=!(!t||!t.match(me.html5Test));return o}if(!me.useHTML5Audio||!me.hasHTML5)return me.html5.usingFlash=!0,je=!0,!1;var n,o,i,a,r=Audio!==t?Ge&&opera.version()<10?new Audio(null):new Audio:null,s={};i=me.audioFormats;for(n in i)if(i.hasOwnProperty(n)&&(o="audio/"+n,s[n]=e(i[n].type),s[o]=s[n],n.match(it)?(me.flash[n]=!0,me.flash[o]=!0):(me.flash[n]=!1,me.flash[o]=!1),
i[n]&&i[n].related))for(a=i[n].related.length-1;a>=0;a--)s["audio/"+i[n].related[a]]=s[n],me.html5[i[n].related[a]]=s[n],me.flash[i[n].related[a]]=s[n];return s.canPlayType=r?e:null,me.html5=g(me.html5,s),me.html5.usingFlash=ee(),je=me.html5.usingFlash,!0},D={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:ve+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:we+"Verify that %s is a valid path.",tryDebug:"Try "+ve+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:we+"Non-HTTP page ("+Te.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:we+"Special case: Waiting for SWF to load with window focus...",waitForever:we+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:we+"Waiting for 100% SWF load...",needFunction:we+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:we+"_debug(): Current sound objects",waitOnload:we+"Waiting for window.onload()",docLoaded:we+"Document already loaded",onload:we+"initComplete(): calling soundManager.onload()",onloadOK:ve+".onload() complete",didInit:we+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:we+"Failed to remove Flash node.",shutdown:ve+".disable(): Shutting down",queue:we+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+V.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:we+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:ve+".load(): current URL already assigned.",badFV:ve+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:we+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:we+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:ve+".setup(): allowed parameters: %s",setupError:ve+'.setup(): "%s" cannot be assigned with this method.',setupUndef:ve+'.setup(): Could not find option "%s"',setupLate:ve+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:we+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:ve+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},$=function(){var e,t,n,o,i;if(e=Ve.call(arguments),o=e.shift(),i=D&&D[o]?D[o]:"",i&&e&&e.length)for(t=0,n=e.length;n>t;t++)i=i.replace("%s",e[t]);return i},q=function(e){return 8===c&&e.loops>1&&e.stream&&(p("as2loop"),e.stream=!1),e},Q=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(me._wD((t||"")+$("policy")),e.usePolicyFile=!0),e},K=function(e){et&&console.warn!==t?console.warn(e):me._wD(e)},u=function(){return!1},N=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=u);t=null},R=function(e){e===t&&(e=!1),(Fe||e)&&me.disable(e)},U=function(e){var t,n=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(n=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return t=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+me.movieURL,me.noSWFCache&&(t+="?ts="+(new Date).getTime()),t},T=function(){c=parseInt(me.flashVersion,10),8!==c&&9!==c&&(me._wD($("badFV",c,Ee)),me.flashVersion=c=Ee);var e=me.debugMode||me.debugFlash?"_debug.swf":".swf";me.useHTML5Audio&&!me.html5Only&&me.audioFormats.mp4.required&&9>c&&(me._wD($("needfl9")),me.flashVersion=c=9),me.version=me.versionNumber+(me.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(me.defaultOptions=g(me.defaultOptions,me.flash9Options),me.features.buffering=!0,me.defaultOptions=g(me.defaultOptions,me.movieStarOptions),me.filePatterns.flash9=new RegExp("\\.(mp3|"+ct.join("|")+")(\\?.*)?$","i"),me.features.movieStar=!0):me.features.movieStar=!1,me.filePattern=me.filePatterns[8!==c?"flash9":"flash8"],me.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),me.features.peakData=me.features.waveformData=me.features.eqData=c>8},C=function(e,t){return _e?void _e._setPolling(e,t):!1},x=function(){if(me.debugURLParam.test(Oe)&&(me.debugMode=!0),s(me.debugID))return!1;var e,t,n,o,i;if(me.debugMode&&!s(me.debugID)&&(!et||!me.useConsole||!me.consoleOnly)){e=Te.createElement("div"),e.id=me.debugID+"-toggle",o={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(Te.createTextNode("-")),e.onclick=W,e.title="Toggle SM2 debug console",Me.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(i in o)o.hasOwnProperty(i)&&(e.style[i]=o[i]);if(t=Te.createElement("div"),t.id=me.debugID,t.style.display=me.debugMode?"block":"none",me.debugMode&&!s(e.id)){try{n=A(),n.appendChild(e)}catch(a){throw new Error($("domError")+" \n"+a.toString())}n.appendChild(t)}}n=null},X=this.getSoundById,p=function(e,t){return e?me._wD($(e),t):""},W=function(){var e=s(me.debugID),t=s(me.debugID+"-toggle");return e?(De?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),void(De=!De)):!1},f=function(n,o,i){if(e.sm2Debugger!==t)try{sm2Debugger.handleEvent(n,o,i)}catch(a){return!1}return!0},j=function(){var e=[];return me.debugMode&&e.push(V.sm2Debug),me.debugFlash&&e.push(V.flashDebug),me.useHighPerformance&&e.push(V.highPerf),e.join(" ")},B=function(){var e=$("fbHandler"),t=me.getMoviePercent(),n=V,o={type:"FLASHBLOCK"};return me.html5Only?!1:void(me.ok()?(me.didFlashBlock&&me._wD(e+": Unblocked"),me.oMC&&(me.oMC.className=[j(),n.swfDefault,n.swfLoaded+(me.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(je&&(me.oMC.className=j()+" "+n.swfDefault+" "+(null===t?n.swfTimedout:n.swfError),me._wD(e+": "+$("fbTimeout")+(t?" ("+$("fbLoaded")+")":""))),me.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:o}),E(o)))},_=function(e,n,o){Pe[e]===t&&(Pe[e]=[]),Pe[e].push({method:n,scope:o||null,fired:!1})},v=function(e){if(e||(e={type:me.ok()?"onready":"ontimeout"}),!ke&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&(me.ok()||Fe&&!e.ignoreInit))return!1;var t,n,o={success:e&&e.ignoreInit?me.ok():!Fe},i=e&&e.type?Pe[e.type]||[]:[],a=[],r=[o],s=je&&!me.ok();for(e.error&&(r[0].error=e.error),t=0,n=i.length;n>t;t++)i[t].fired!==!0&&a.push(i[t]);if(a.length)for(t=0,n=a.length;n>t;t++)a[t].scope?a[t].method.apply(a[t].scope,r):a[t].method.apply(this,r),s||(a[t].fired=!0);return!0},w=function(){e.setTimeout(function(){me.useFlashBlock&&B(),v(),"function"==typeof me.onload&&(p("onload",1),me.onload.apply(e),p("onloadOK",1)),me.waitForWindowLoad&&se.add(e,"load",w)},1)},de=function(){if(le!==t)return le;var n,o,i,a=!1,r=navigator,s=r.plugins,u=e.ActiveXObject;if(s&&s.length)o="application/x-shockwave-flash",i=r.mimeTypes,i&&i[o]&&i[o].enabledPlugin&&i[o].enabledPlugin.description&&(a=!0);else if(u!==t&&!Me.match(/MSAppHost/i)){try{n=new u("ShockwaveFlash.ShockwaveFlash")}catch(l){n=null}a=!!n,n=null}return le=a,a},ee=function(){var e,t,n=me.audioFormats,o=Qe&&!!Me.match(/os (1|2|3_0|3_1)\s/i);if(o?(me.hasHTML5=!1,me.html5Only=!0,me.oMC&&(me.oMC.style.display="none")):me.useHTML5Audio&&(me.html5&&me.html5.canPlayType||(me._wD("SoundManager: No HTML5 Audio() support detected."),me.hasHTML5=!1),Ye&&me._wD(we+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(le?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),me.useHTML5Audio&&me.hasHTML5){Y=!0;for(t in n)n.hasOwnProperty(t)&&n[t].required&&(me.html5.canPlayType(n[t].type)?me.preferFlash&&(me.flash[t]||me.flash[n[t].type])&&(e=!0):(Y=!1,e=!0))}return me.ignoreFlash&&(e=!1,Y=!0),me.html5Only=me.hasHTML5&&me.useHTML5Audio&&!e,!me.html5Only},Z=function(e){var t,n,o,i=0;if(e instanceof Array){for(t=0,n=e.length;n>t;t++)if(e[t]instanceof Object){if(me.canPlayMIME(e[t].type)){i=t;break}}else if(me.canPlayURL(e[t])){i=t;break}e[i].url&&(e[i]=e[i].url),o=e[i]}else o=e;return o},J=function(e){e._hasTimer||(e._hasTimer=!0,!Ze&&me.html5PollingInterval&&(null===$e&&0===Ue&&($e=setInterval(G,me.html5PollingInterval)),Ue++))},z=function(e){e._hasTimer&&(e._hasTimer=!1,!Ze&&me.html5PollingInterval&&Ue--)},G=function(){var e;if(null!==$e&&!Ue)return clearInterval($e),$e=null,!1;for(e=me.soundIDs.length-1;e>=0;e--)me.sounds[me.soundIDs[e]].isHTML5&&me.sounds[me.soundIDs[e]]._hasTimer&&me.sounds[me.soundIDs[e]]._onTimer()},E=function(n){n=n!==t?n:{},"function"==typeof me.onerror&&me.onerror.apply(e,[{type:n.type!==t?n.type:null}]),n.fatal!==t&&n.fatal&&me.disable()},ce=function(){if(!Ye||!de())return!1;var e,t,n=me.audioFormats;for(t in n)if(n.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(me._wD(ve+": Using flash fallback for "+t+" format"),me.html5[t]=!1,n[t]&&n[t].related))for(e=n[t].related.length-1;e>=0;e--)me.html5[n[t].related[e]]=!1},this._setSandboxType=function(e){var n=me.sandbox;n.type=e,n.description=n.types[n.types[e]!==t?e:"unknown"],"localWithFile"===n.type?(n.noRemote=!0,n.noLocal=!1,p("secNote",2)):"localWithNetwork"===n.type?(n.noRemote=!1,n.noLocal=!0):"localTrusted"===n.type&&(n.noRemote=!1,n.noLocal=!1)},this._externalInterfaceOK=function(e){if(me.swfLoaded)return!1;var t;return f("swf",!0),f("flashtojs",!0),me.swfLoaded=!0,nt=!1,Ye&&ce(),e&&e.replace(/\+dev/i,"")===me.versionNumber.replace(/\+dev/i,"")?void setTimeout(d,Xe?100:1):(t=ve+': Fatal: JavaScript file build "'+me.versionNumber+'" does not match Flash SWF build "'+e+'" at '+me.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(t)},0),!1)},H=function(e,n){function o(){var e,t=[],n=[],o=" + ";e="SoundManager "+me.version+(!me.html5Only&&me.useHTML5Audio?me.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),me.html5Only?me.html5PollingInterval&&t.push("html5PollingInterval ("+me.html5PollingInterval+"ms)"):(me.preferFlash&&t.push("preferFlash"),me.useHighPerformance&&t.push("useHighPerformance"),me.flashPollingInterval&&t.push("flashPollingInterval ("+me.flashPollingInterval+"ms)"),me.html5PollingInterval&&t.push("html5PollingInterval ("+me.html5PollingInterval+"ms)"),me.wmode&&t.push("wmode ("+me.wmode+")"),me.debugFlash&&t.push("debugFlash"),me.useFlashBlock&&t.push("flashBlock")),t.length&&(n=n.concat([t.join(o)])),me._wD(e+(n.length?o+n.join(", "):""),1),pe()}function i(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(Le&&Se)return!1;if(me.html5Only)return T(),o(),me.oMC=s(me.movieID),d(),Le=!0,Se=!0,!1;var a,r,u,l,c,f,p,h,g=n||me.url,m=me.altURL||g,y="JS/Flash audio component (SoundManager 2)",_=A(),v=j(),w=null,b=Te.getElementsByTagName("html")[0];if(w=b&&b.dir&&b.dir.match(/rtl/i),e=e===t?me.id:e,T(),me.url=U(ut?g:m),n=me.url,me.wmode=!me.wmode&&me.useHighPerformance?"transparent":me.wmode,null!==me.wmode&&(Me.match(/msie 8/i)||!Xe&&!me.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Be.push(D.spcWmode),me.wmode=null),a={name:e,id:e,src:n,quality:"high",allowScriptAccess:me.allowScriptAccess,bgcolor:me.bgColor,pluginspage:lt+"www.macromedia.com/go/getflashplayer",title:y,type:"application/x-shockwave-flash",wmode:me.wmode,hasPriority:"true"},me.debugFlash&&(a.FlashVars="debug=1"),me.wmode||delete a.wmode,Xe)r=Te.createElement("div"),l=['<object id="'+e+'" data="'+n+'" type="'+a.type+'" title="'+a.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+lt+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',i("movie",n),i("AllowScriptAccess",me.allowScriptAccess),i("quality",a.quality),me.wmode?i("wmode",me.wmode):"",i("bgcolor",me.bgColor),i("hasPriority","true"),me.debugFlash?i("FlashVars",a.FlashVars):"","</object>"].join("");else{r=Te.createElement("embed");for(u in a)a.hasOwnProperty(u)&&r.setAttribute(u,a[u])}if(x(),v=j(),_=A())if(me.oMC=s(me.movieID)||Te.createElement("div"),me.oMC.id)h=me.oMC.className,me.oMC.className=(h?h+" ":V.swfDefault)+(v?" "+v:""),me.oMC.appendChild(r),Xe&&(c=me.oMC.appendChild(Te.createElement("div")),c.className=V.swfBox,c.innerHTML=l),Se=!0;else{if(me.oMC.id=me.movieID,me.oMC.className=V.swfDefault+" "+v,f=null,c=null,me.useFlashBlock||(me.useHighPerformance?f={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(f={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},w&&(f.left=Math.abs(parseInt(f.left,10))+"px"))),Je&&(me.oMC.style.zIndex=1e4),!me.debugFlash)for(p in f)f.hasOwnProperty(p)&&(me.oMC.style[p]=f[p]);try{Xe||me.oMC.appendChild(r),_.appendChild(me.oMC),Xe&&(c=me.oMC.appendChild(Te.createElement("div")),c.className=V.swfBox,c.innerHTML=l),Se=!0}catch(M){throw new Error($("domError")+" \n"+M.toString())}}return Le=!0,o(),!0},L=function(){return me.html5Only?(H(),!1):_e?!1:me.url?(_e=me.getMovie(me.id),_e||(Ce?(Xe?me.oMC.innerHTML=xe:me.oMC.appendChild(Ce),Ce=null,Le=!0):H(me.id,me.url),_e=me.getMovie(me.id)),"function"==typeof me.oninitmovie&&setTimeout(me.oninitmovie,1),he(),!0):(p("noURL"),!1)},b=function(){setTimeout(M,1e3)},O=function(){e.setTimeout(function(){K(we+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),me.setup({preferFlash:!1}).reboot(),me.didFlashBlock=!0,me.beginDelayedInit()},1)},M=function(){var t,n=!1;return me.url?Ne?!1:(Ne=!0,se.remove(e,"load",b),le&&nt&&!tt?(p("waitFocus"),!1):(ke||(t=me.getMoviePercent(),t>0&&100>t&&(n=!0)),void setTimeout(function(){return t=me.getMoviePercent(),n?(Ne=!1,me._wD($("waitSWF")),e.setTimeout(b,1),!1):(ke||(me._wD(ve+": No Flash response within expected time. Likely causes: "+(0===t?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(me.debugFlash?" "+$("checkSWF"):""),2),!ut&&t&&(p("localFail",2),me.debugFlash||p("tryDebug",2)),0===t&&me._wD($("swf404",me.url),1),f("flashtojs",!1," (Check flash security or flash blockers)")),void(!ke&&ot&&(null===t?me.useFlashBlock||0===me.flashLoadTimeout?(me.useFlashBlock&&B(),p("waitForever")):!me.useFlashBlock&&Y?O():(p("waitForever"),v({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===me.flashLoadTimeout?p("waitForever"):!me.useFlashBlock&&Y?O():R(!0))))},me.flashLoadTimeout))):!1},P=function(){function t(){se.remove(e,"focus",P)}return tt||!nt?(t(),!0):(ot=!0,tt=!0,p("gotFocus"),Ne=!1,b(),t(),!0)},he=function(){Be.length&&(me._wD("SoundManager 2: "+Be.join(" "),1),Be=[])},pe=function(){he();var e,t=[];if(me.useHTML5Audio&&me.hasHTML5){for(e in me.audioFormats)me.audioFormats.hasOwnProperty(e)&&t.push(e+" = "+me.html5[e]+(!me.html5[e]&&je&&me.flash[e]?" (using flash)":me.preferFlash&&me.flash[e]&&je?" (preferring flash)":me.html5[e]?"":" ("+(me.audioFormats[e].required?"required, ":"")+"and no flash support)"));me._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}},h=function(t){if(ke)return!1;if(me.html5Only)return p("sm2Loaded",1),ke=!0,w(),f("onload",!0),!0;var n,o=me.useFlashBlock&&me.flashLoadTimeout&&!me.getMoviePercent(),i=!0;return o||(ke=!0),n={type:!le&&je?"NO_FLASH":"INIT_TIMEOUT"},me._wD("SoundManager 2 "+(Fe?"failed to load":"loaded")+" ("+(Fe?"Flash security/load error":"OK")+") "+String.fromCharCode(Fe?10006:10003),Fe?2:1),Fe||t?(me.useFlashBlock&&me.oMC&&(me.oMC.className=j()+" "+(null===me.getMoviePercent()?V.swfTimedout:V.swfError)),v({type:"ontimeout",error:n,ignoreInit:!0}),f("onload",!1),E(n),i=!1):f("onload",!0),Fe||(me.waitForWindowLoad&&!Ie?(p("waitOnload"),se.add(e,"load",w)):(me.waitForWindowLoad&&Ie&&p("docLoaded"),w())),i},l=function(){var e,n=me.setupOptions;for(e in n)n.hasOwnProperty(e)&&(me[e]===t?me[e]=n[e]:me[e]!==n[e]&&(me.setupOptions[e]=me[e]))},d=function(){function t(){se.remove(e,"load",me.beginDelayedInit)}if(ke)return p("didInit"),!1;if(me.html5Only)return ke||(t(),me.enabled=!0,h()),!0;L();try{_e._externalInterfaceTest(!1),C(!0,me.flashPollingInterval||(me.useHighPerformance?10:50)),me.debugMode||_e._disableDebug(),me.enabled=!0,f("jstoflash",!0),me.html5Only||se.add(e,"unload",u)}catch(n){return me._wD("js/flash exception: "+n.toString()),f("jstoflash",!1),E({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),R(!0),h(),!1}return h(),t(),!0},k=function(){return I?!1:(I=!0,l(),x(),function(){var e="sm2-usehtml5audio=",t="sm2-preferflash=",n=null,o=null,i=Oe.toLowerCase();-1!==i.indexOf(e)&&(n="1"===i.charAt(i.indexOf(e)+e.length),et&&console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter"),me.setup({useHTML5Audio:n})),-1!==i.indexOf(t)&&(o="1"===i.charAt(i.indexOf(t)+t.length),et&&console.log((o?"Enabling ":"Disabling ")+"preferFlash via URL parameter"),me.setup({preferFlash:o}))}(),!le&&me.hasHTML5&&(me._wD("SoundManager 2: No Flash detected"+(me.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),me.setup({useHTML5Audio:!0,preferFlash:!1})),re(),!le&&je&&(Be.push(D.needFlash),me.setup({flashLoadTimeout:1})),Te.removeEventListener&&Te.removeEventListener("DOMContentLoaded",k,!1),L(),!0)},ae=function(){return"complete"===Te.readyState&&(k(),Te.detachEvent("onreadystatechange",ae)),!0},F=function(){Ie=!0,k(),se.remove(e,"load",F)},S=function(){Ze&&((!me.setupOptions.useHTML5Audio||me.setupOptions.preferFlash)&&Be.push(D.mobileUA),me.setupOptions.useHTML5Audio=!0,me.setupOptions.preferFlash=!1,(Qe||Ke&&!Me.match(/android\s2\.3/i))&&(Be.push(D.globalHTML5),Qe&&(me.ignoreFlash=!0),We=!0))},S(),de(),se.add(e,"focus",P),se.add(e,"load",b),se.add(e,"load",F),Te.addEventListener?Te.addEventListener("DOMContentLoaded",k,!1):Te.attachEvent?Te.attachEvent("onreadystatechange",ae):(f("onload",!1),E({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!e||!e.document)throw new Error("SoundManager requires a browser with window and document objects.");var o=null;void 0!==e.SM2_DEFER&&SM2_DEFER||(o=new n),"object"==typeof module&&module&&"object"==typeof module.exports?(e.soundManager=o,module.exports.SoundManager=n,module.exports.soundManager=o):"function"==typeof define&&define.amd?define("SoundManager",[],function(){return{SoundManager:n,soundManager:o}}):(e.SoundManager=n,e.soundManager=o)}(window);var ngSoundManager=angular.module("angularSoundManager",[]).config(["$logProvider",function(e){e.debugEnabled(!1)}]);ngSoundManager.filter("humanTime",function(){return function(e){function t(e){return 10>e?"0"+e.toString():e.toString()}var n=e/1e3/60<<0,o=Math.round(e/1e3%60);return t(n)+":"+t(o)}}),ngSoundManager.factory("angularPlayer",["$rootScope","$log",function(e,t){var n=null,o=!1,i=!0,a=!1,r=90,s=0,u=[];return{init:function(){"undefined"==typeof soundManager&&alert("Please include SoundManager2 Library!"),soundManager.setup({preferFlash:!1,debugMode:!1,useHTML5Audio:!0,onready:function(){},ontimeout:function(){alert("SM2 failed to start. Flash missing, blocked or security error?"),alert("The status is "+status.success+", the error type is "+status.error.type)},defaultOptions:{autoLoad:!1,autoPlay:!1,from:null,loops:1,multiShot:!1,multiShotEvents:!1,onid3:null,onload:null,onstop:null,onfailure:"nextTrack",onpause:null,onplay:null,onresume:null,position:null,pan:0,stream:!0,to:null,type:"audio/mp3",usePolicyFile:!1,volume:r,whileloading:function(){var t=this.bytesLoaded/this.bytesTotal*100;e.$broadcast("track:loaded",t)},whileplaying:function(){n=this.id,s=this.position/this.duration*100,e.$broadcast("track:progress",s),e.$broadcast("currentTrack:position",this.position),e.$broadcast("currentTrack:duration",this.duration)},onfinish:function(){if(soundManager._writeDebug(this.id+" finished playing"),i===!0){var t=angular.element(document.querySelector("[ng-app]")),o=t.injector(),a=o.get("angularPlayer");a.nextTrack(),e.$broadcast("track:id",n)}}}}),soundManager.onready(function(){t.debug("song manager ready!");var n=soundManager.ok();t.debug("is supported: "+n),e.$broadcast("angularPlayer:ready",!0)})},isInArray:function(e,t){for(var n=0;n<e.length;n++)if(e[n].id===t)return n;return!1},getIndexByValue:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return!1},asyncLoop:function(e){var t=-1,n=function(){return t++,t==e.length?void e.callback():void e.functionToLoop(n,t)};n()},setCurrentTrack:function(e){n=e},getCurrentTrack:function(){return n},currentTrackData:function(){var e=this.getCurrentTrack(),t=this.isInArray(u,e);return u[t]},getPlaylist:function(e){return"undefined"==typeof e?u:u[e]},addToPlaylist:function(t){u.push(t),e.$broadcast("player:playlist",u)},isTrackValid:function(e){if("undefined"==typeof e)return t.debug("invalid track data"),!1;if(e.url.indexOf("soundcloud")>-1){if("undefined"==typeof e.url)return t.debug("invalid soundcloud track url"),!1}else if(soundManager.canPlayURL(e.url)!==!0)return t.debug("invalid song url"),!1},addTrack:function(e){if(!this.isTrackValid)return null;var t=this.isInArray(this.getPlaylist(),e.id);return t!==!1&&this.removeSong(e.id,t),soundManager.createSound({id:e.id,url:e.url}),this.addToPlaylist(e),e.id},removeSong:function(t,o){t===n&&this.stop(),soundManager.destroySound(t),u.splice(o,1),e.$broadcast("player:playlist",u)},initPlayTrack:function(t,n){n!==!0&&(this.stop(),this.setCurrentTrack(t)),soundManager.play(t),e.$broadcast("track:id",t),a=!0,e.$broadcast("music:isPlaying",a)},play:function(){var e=null;if(null===this.getCurrentTrack()){if(0===soundManager.soundIDs.length)return void t.debug("playlist is empty!");e=soundManager.soundIDs[0],this.initPlayTrack(e)}else e=this.getCurrentTrack(),this.initPlayTrack(e,!0)},pause:function(){soundManager.pause(this.getCurrentTrack()),a=!1,e.$broadcast("music:isPlaying",a)},stop:function(){this.pause(),this.resetProgress(),e.$broadcast("track:progress",s),e.$broadcast("currentTrack:position",0),e.$broadcast("currentTrack:duration",0),soundManager.stopAll(),soundManager.unload(this.getCurrentTrack())},playTrack:function(e){this.initPlayTrack(e)},nextTrack:function(){if(null===this.getCurrentTrack())return t.debug("Please click on Play before this action"),null;var n=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),i=+n+1,r=soundManager.soundIDs[i];"undefined"!=typeof r?this.playTrack(r):o===!0?this.playTrack(soundManager.soundIDs[0]):(a=!1,e.$broadcast("music:isPlaying",a))},prevTrack:function(){if(null===this.getCurrentTrack())return t.debug("Please click on Play before this action"),null;var e=this.getIndexByValue(soundManager.soundIDs,this.getCurrentTrack()),n=+e-1,o=soundManager.soundIDs[n];"undefined"!=typeof o?this.playTrack(o):t.debug("no prev track found!")},mute:function(){soundManager.muted===!0?soundManager.unmute():soundManager.mute(),e.$broadcast("music:mute",soundManager.muted)},getMuteStatus:function(){return soundManager.muted},repeatToggle:function(){o=o===!0?!1:!0,e.$broadcast("music:repeat",o)},getRepeatStatus:function(){return o},getVolume:function(){return r},adjustVolume:function(t){var n=function(t){for(var n=0;n<soundManager.soundIDs.length;n++){var o=soundManager.getSoundById(soundManager.soundIDs[n]);o.setVolume(t)}e.$broadcast("music:volume",t)};t===!0?100>r&&(r+=10,n(r)):r>0&&(r-=10,n(r))},adjustVolumeSlider:function(t){var n=function(t){for(var n=0;n<soundManager.soundIDs.length;n++){var o=soundManager.getSoundById(soundManager.soundIDs[n]);o.setVolume(t)}e.$broadcast("music:volume",t)};n(t)},clearPlaylist:function(n){t.debug("clear playlist"),this.resetProgress();var o=soundManager.soundIDs.length;this.asyncLoop({length:o,functionToLoop:function(e,t){setTimeout(function(){soundManager.destroySound(soundManager.soundIDs[0]),e()},100)},callback:function(){t.debug("All done!"),u=[],e.$broadcast("player:playlist",u),n(!0)}})},resetProgress:function(){s=0},isPlayingStatus:function(){return a}}}]),ngSoundManager.directive("soundManager",["$filter","angularPlayer",function(e,t){return{restrict:"E",link:function(n,o,i){t.init(),n.$on("track:progress",function(e,t){n.$apply(function(){n.progress=t})}),n.$on("track:id",function(e,o){n.$apply(function(){n.currentPlaying=t.currentTrackData()})}),n.$on("currentTrack:position",function(t,o){n.$apply(function(){n.currentPostion=e("humanTime")(o)})}),n.$on("currentTrack:duration",function(t,o){n.$apply(function(){n.currentDuration=e("humanTime")(o)})}),n.isPlaying=!1,n.$on("music:isPlaying",function(e,t){n.$apply(function(){n.isPlaying=t})}),n.playlist=t.getPlaylist(),n.$on("player:playlist",function(e,t){n.$apply(function(){n.playlist=t})})}}}]),ngSoundManager.directive("musicPlayer",["angularPlayer","$log",function(e,t){return{restrict:"EA",scope:{song:"=addSong"},link:function(n,o,i){var a=function(){var t=e.addTrack(n.song);"play"===i.musicPlayer&&e.playTrack(t)};o.bind("click",function(){t.debug("adding song to playlist"),a()})}}}]),ngSoundManager.directive("playFromPlaylist",["angularPlayer",function(e){return{restrict:"EA",scope:{song:"=playFromPlaylist"},link:function(t,n,o){n.bind("click",function(n){e.playTrack(t.song.id)})}}}]),ngSoundManager.directive("removeFromPlaylist",["angularPlayer",function(e){return{restrict:"EA",scope:{song:"=removeFromPlaylist"},link:function(t,n,o){n.bind("click",function(n){e.removeSong(t.song.id,o.index)})}}}]),ngSoundManager.directive("seekTrack",["angularPlayer","$log",function(e,t){return{restrict:"EA",link:function(n,o,i){o.bind("click",function(n){if(null===e.getCurrentTrack())return void t.debug("no track loaded");var i=soundManager.getSoundById(e.getCurrentTrack()),a=function(e){for(var t=0,n=e.target;n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)t+=n.offsetLeft-n.scrollLeft,n=n.offsetParent;return e.clientX-t},r=n.offsetX||a(n),s=o[0].clientWidth,u=i.durationEstimate;i.setPosition(r/s*u)})}}}]),ngSoundManager.directive("playMusic",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){n.bind("click",function(t){e.play()})}}}]),ngSoundManager.directive("pauseMusic",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){n.bind("click",function(t){e.pause()})}}}]),ngSoundManager.directive("stopMusic",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){n.bind("click",function(t){e.stop()})}}}]),ngSoundManager.directive("nextTrack",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){n.bind("click",function(t){e.nextTrack()})}}}]),ngSoundManager.directive("prevTrack",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){n.bind("click",function(t){e.prevTrack()})}}}]),ngSoundManager.directive("muteMusic",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){n.bind("click",function(t){e.mute()}),t.mute=e.getMuteStatus(),t.$on("music:mute",function(e,n){t.$apply(function(){t.mute=n})})}}}]),ngSoundManager.directive("repeatMusic",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){n.bind("click",function(t){e.repeatToggle()}),t.repeat=e.getRepeatStatus(),t.$on("music:repeat",function(e,n){t.$apply(function(){t.repeat=n})})}}}]),ngSoundManager.directive("musicVolume",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){n.bind("click",function(t){"increase"===o.type?e.adjustVolume(!0):e.adjustVolume(!1)}),t.volume=e.getVolume(),t.$on("music:volume",function(e,n){t.$apply(function(){t.volume=n})})}}}]),ngSoundManager.directive("clearPlaylist",["angularPlayer","$log",function(e,t){return{restrict:"EA",link:function(n,o,i){o.bind("click",function(n){e.stop(),e.setCurrentTrack(null),e.clearPlaylist(function(e){t.debug("all clear!")})})}}}]),ngSoundManager.directive("playAll",["angularPlayer","$log",function(e,t){return{restrict:"EA",scope:{songs:"=playAll"},link:function(n,o,i){o.bind("click",function(o){e.clearPlaylist(function(o){t.debug("cleared, ok now add to playlist");for(var a=0;a<n.songs.length;a++)e.addTrack(n.songs[a]);"false"!=i.play&&e.play()})})}}}]),ngSoundManager.directive("volumeBar",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){n.bind("click",function(t){var o=function(e){for(var t=0,n=e.target;n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)t+=n.offsetLeft-n.scrollLeft,n=n.offsetParent;return e.clientX-t},i=t.offsetX||o(t),a=n[0].clientWidth,r=100,s=i/a*r;e.adjustVolumeSlider(s)}),t.volume=e.getVolume(),t.$on("music:volume",function(e,n){t.$apply(function(){t.volume=n})})}}}]),ngSoundManager.directive("playPauseToggle",["angularPlayer",function(e){return{restrict:"EA",link:function(t,n,o){t.$on("music:isPlaying",function(e,t){t?"undefined"!=typeof o.pause?n.html(o.pause):n.html("Pause"):"undefined"!=typeof o.play?n.html(o.play):n.html("Play")}),n.bind("click",function(t){e.isPlayingStatus()?e.pause():e.play()})}}}]);
